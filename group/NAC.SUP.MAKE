
PATH=C:\Symbian\8.0a\S60_2nd_FP2\epoc32\tools\;C:\Symbian\8.0a\S60_2nd_FP2\epoc32\gcc\bin\;C:\Program Files\Common Files\Symbian\Tools;C:\Perl\bin\;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\TortoiseSVN\bin;C:\Program Files\Java\jdk1.5.0\bin;C:\Program Files\Microsoft Visual Studio\Common\Tools\WinNT;C:\Program Files\Microsoft Visual Studio\Common\MSDev98\Bin;C:\Program Files\Microsoft Visual Studio\Common\Tools;C:\Program Files\Microsoft Visual Studio\VC98\bin;C:\Program Files\Java\jdk1.5.0\bin

# EPOC DEFINITIONS

EPOCBLD = \Symbian\8.0a\S60_2nd_FP2\EPOC32\BUILD\SYMBIAN\MOBTRACKER\GROUP\NAC\WINS\ #
EPOCTRG = \Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\ #
EPOCLIB = \Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\ #
EPOCLINK = \Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\ #
EPOCSTATLINK = \Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\ #

EPOCBLDUDEB = $(EPOCBLD)UDEB
EPOCTRGUDEB = $(EPOCTRG)UDEB
EPOCLIBUDEB = $(EPOCLIB)UDEB
EPOCLINKUDEB = $(EPOCLINK)UDEB
EPOCSTATLINKUDEB = $(EPOCSTATLINK)UDEB

EPOCBLDUREL = $(EPOCBLD)UREL
EPOCTRGUREL = $(EPOCTRG)UREL
EPOCLIBUREL = $(EPOCLIB)UDEB
EPOCLINKUREL = $(EPOCLINK)UDEB
EPOCSTATLINKUREL = $(EPOCSTATLINK)UREL


TRGDIR = Z\SYSTEM\APPS\NAC

DATADIR = Z\SYSTEM\DATA

LIBRARY :

MAKEWORKLIBRARY : "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB" :
	@perl -S emkdir.pl "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB"


# BUILD - UDEB

LIBS= \
	"$(EPOCLINKUDEB)\ESTOR.LIB" \
	"$(EPOCLINKUDEB)\MOBINFO.LIB" \
	"$(EPOCLINKUDEB)\PLPVARIANT.LIB" \
	"$(EPOCLINKUDEB)\EIKCTL.LIB" \
	"$(EPOCLINKUDEB)\ETEXT.LIB" \
	"$(EPOCLINKUDEB)\MSGS.LIB" \
	"$(EPOCLINKUDEB)\SMCM.LIB" \
	"$(EPOCLINKUDEB)\GSMU.LIB" \
	"$(EPOCLINKUDEB)\BAFL.LIB" \
	"$(EPOCLINKUDEB)\COMMONENGINE.LIB" \
	"$(EPOCLINKUDEB)\EUSER.LIB" \
	"$(EPOCLINKUDEB)\APPARC.LIB" \
	"$(EPOCLINKUDEB)\CONE.LIB" \
	"$(EPOCLINKUDEB)\EIKCORE.LIB" \
	"$(EPOCLINKUDEB)\EIKCOCTL.LIB" \
	"$(EPOCLINKUDEB)\AVKON.LIB" \
	"$(EPOCLINKUDEB)\EIKDLG.LIB" \
	"$(EPOCLINKUDEB)\MTUR.LIB" \
	"$(EPOCLINKUDEB)\EFSRV.LIB"

LINK_OBJS= \
	"$(EPOCBLDUDEB)\DISPLAYIMSI.obj" \
	"$(EPOCBLDUDEB)\NAC.UID.obj" \
	"$(EPOCBLDUDEB)\SMSEXAMPLEMTMSENGINE.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERAPP.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERAPPUI.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERCONTAINER.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERDOCUMENT.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERENGINE.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERINFORMATIONANDSETTINGS.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERSETTINGSLISTBOX.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERSETTINGSVIEW.obj" \
	"$(EPOCBLDUDEB)\ZMOBILETRACKERVIEW.obj"

STAGE1_LINK_FLAGS="$(EPOCSTATLINKUDEB)\EDLL.LIB" \
 $(LIBS) /nologo /entry:"_E32Dll" /subsystem:windows /dll /debug \
 /incremental:no /machine:IX86 /nodefaultlib /include:"?_E32Dll@@YGHPAXI0@Z" /out:"$(EPOCBLDUDEB)\NAC.APP" /WARN:3

PRELINKUDEB : $(LINK_OBJS) "$(EPOCSTATLINKUDEB)\EDLL.LIB" $(LIBS)
	link.exe @<<
		$(STAGE1_LINK_FLAGS) $(LINK_OBJS)
<<
	del "$(EPOCBLDUDEB)\NAC.APP"
	del "$(EPOCBLDUDEB)\NAC.exp"
	dumpbin /exports /out:"$(EPOCBLDUDEB)\NAC.inf" "$(EPOCBLDUDEB)\NAC.lib"
	del "$(EPOCBLDUDEB)\NAC.lib"
	perl -S makedef.pl -Inffile "$(EPOCBLDUDEB)\NAC.inf" -1 ?NewApplication@@YAPAVCApaApplication@@XZ "$(EPOCBLD)NAC.def" 
	del "$(EPOCBLDUDEB)\NAC.inf"
	lib.exe  /nologo /machine:i386 /nodefaultlib /name:"NAC.APP" /def:"$(EPOCBLD)NAC.def" /out:"$(EPOCBLDUDEB)\NAC.lib"
	del "$(EPOCBLDUDEB)\NAC.lib"
	@echo First-stage link successful


STOPLINKUDEB : DELEXPOBJUDEB
	@echo Stopped the build by removing the export object,
	@echo if present, because the pre-link stage failed


POSTBUILDUDEB : DELEXPOBJUDEB


DELEXPOBJUDEB :
	if exist "$(EPOCBLDUDEB)\NAC.exp" del "$(EPOCBLDUDEB)\NAC.exp"



# BUILD - UREL

LIBS= \
	"$(EPOCLINKUREL)\ESTOR.LIB" \
	"$(EPOCLINKUREL)\MOBINFO.LIB" \
	"$(EPOCLINKUREL)\PLPVARIANT.LIB" \
	"$(EPOCLINKUREL)\EIKCTL.LIB" \
	"$(EPOCLINKUREL)\ETEXT.LIB" \
	"$(EPOCLINKUREL)\MSGS.LIB" \
	"$(EPOCLINKUREL)\SMCM.LIB" \
	"$(EPOCLINKUREL)\GSMU.LIB" \
	"$(EPOCLINKUREL)\BAFL.LIB" \
	"$(EPOCLINKUREL)\COMMONENGINE.LIB" \
	"$(EPOCLINKUREL)\EUSER.LIB" \
	"$(EPOCLINKUREL)\APPARC.LIB" \
	"$(EPOCLINKUREL)\CONE.LIB" \
	"$(EPOCLINKUREL)\EIKCORE.LIB" \
	"$(EPOCLINKUREL)\EIKCOCTL.LIB" \
	"$(EPOCLINKUREL)\AVKON.LIB" \
	"$(EPOCLINKUREL)\EIKDLG.LIB" \
	"$(EPOCLINKUREL)\MTUR.LIB" \
	"$(EPOCLINKUREL)\EFSRV.LIB"

LINK_OBJS= \
	"$(EPOCBLDUREL)\DISPLAYIMSI.obj" \
	"$(EPOCBLDUREL)\NAC.UID.obj" \
	"$(EPOCBLDUREL)\SMSEXAMPLEMTMSENGINE.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERAPP.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERAPPUI.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERCONTAINER.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERDOCUMENT.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERENGINE.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERINFORMATIONANDSETTINGS.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERSETTINGSLISTBOX.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERSETTINGSVIEW.obj" \
	"$(EPOCBLDUREL)\ZMOBILETRACKERVIEW.obj"

STAGE1_LINK_FLAGS="$(EPOCSTATLINKUREL)\EDLL.LIB" \
 $(LIBS) /nologo /entry:"_E32Dll" /subsystem:windows /dll \
 /incremental:no /machine:IX86 /nodefaultlib /include:"?_E32Dll@@YGHPAXI0@Z" /out:"$(EPOCBLDUREL)\NAC.APP" /WARN:3

PRELINKUREL : $(LINK_OBJS) "$(EPOCSTATLINKUREL)\EDLL.LIB" $(LIBS)
	link.exe @<<
		$(STAGE1_LINK_FLAGS) $(LINK_OBJS)
<<
	del "$(EPOCBLDUREL)\NAC.APP"
	del "$(EPOCBLDUREL)\NAC.exp"
	dumpbin /exports /out:"$(EPOCBLDUREL)\NAC.inf" "$(EPOCBLDUREL)\NAC.lib"
	del "$(EPOCBLDUREL)\NAC.lib"
	perl -S makedef.pl -Inffile "$(EPOCBLDUREL)\NAC.inf" -1 ?NewApplication@@YAPAVCApaApplication@@XZ "$(EPOCBLD)NAC.def" 
	del "$(EPOCBLDUREL)\NAC.inf"
	lib.exe  /nologo /machine:i386 /nodefaultlib /name:"NAC.APP" /def:"$(EPOCBLD)NAC.def" /out:"$(EPOCBLDUREL)\NAC.lib"
	del "$(EPOCBLDUREL)\NAC.lib"
	@echo First-stage link successful


STOPLINKUREL : DELEXPOBJUREL
	@echo Stopped the build by removing the export object,
	@echo if present, because the pre-link stage failed


POSTBUILDUREL : DELEXPOBJUREL


DELEXPOBJUREL :
	if exist "$(EPOCBLDUREL)\NAC.exp" del "$(EPOCBLDUREL)\NAC.exp"



DEPEND= \
	"\SYMBIAN\MOBTRACKER\DATA\NAC.LOC" \
	"\SYMBIAN\MOBTRACKER\INC\NAC.HRH"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC.r" : "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC.rSC.dummy"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC.rSC.dummy" : "\SYMBIAN\MOBTRACKER\SRC\..\DATA\Nac.rss" $(DEPEND)
	perl -S epocrc_ide6.pl -I "\SYMBIAN\MOBTRACKER\SRC\..\DATA" -I "\SYMBIAN\MOBTRACKER\GROUP" -I "\SYMBIAN\MOBTRACKER\INC" -I "\SYMBIAN\MOBTRACKER\DATA" -I- -I "\SYMBIAN\MOBTRACKER\GROUP" -I "\Symbian\8.0a\S60_2nd_FP2\EPOC32\INCLUDE" -DLANGUAGE_SC -u "\SYMBIAN\MOBTRACKER\SRC\..\DATA\Nac.rss" -o"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC.rSC" -h"\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC.rs~" -t"$(EPOCBLDUDEB)"
	echo this is a dummy output file > "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC.rSC.dummy"
	perl -S ecopyfile.pl "\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC.rs~" "\Symbian\8.0a\S60_2nd_FP2\EPOC32\INCLUDE\NAC.RSG"
	del "\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC.rs~"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC.r" : "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC.rSC.dummy"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC.rSC.dummy" : "\SYMBIAN\MOBTRACKER\SRC\..\DATA\Nac.rss" $(DEPEND)
	perl -S epocrc_ide6.pl -I "\SYMBIAN\MOBTRACKER\SRC\..\DATA" -I "\SYMBIAN\MOBTRACKER\GROUP" -I "\SYMBIAN\MOBTRACKER\INC" -I "\SYMBIAN\MOBTRACKER\DATA" -I- -I "\SYMBIAN\MOBTRACKER\GROUP" -I "\Symbian\8.0a\S60_2nd_FP2\EPOC32\INCLUDE" -DLANGUAGE_SC -u "\SYMBIAN\MOBTRACKER\SRC\..\DATA\Nac.rss" -o"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC.rSC" -h"\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC.rs~" -t"$(EPOCBLDUREL)"
	echo this is a dummy output file > "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC.rSC.dummy"
	perl -S ecopyfile.pl "\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC.rs~" "\Symbian\8.0a\S60_2nd_FP2\EPOC32\INCLUDE\NAC.RSG"
	del "\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC.rs~"

DEPEND= \
	"\SYMBIAN\MOBTRACKER\DATA\NAC.LOC"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC_CAPTION.r" : "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC_CAPTION.rSC.dummy"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC_CAPTION.rSC.dummy" : "\SYMBIAN\MOBTRACKER\SRC\..\DATA\Nac_caption.rss" $(DEPEND)
	perl -S epocrc_ide6.pl -I "\SYMBIAN\MOBTRACKER\SRC\..\DATA" -I "\SYMBIAN\MOBTRACKER\GROUP" -I "\SYMBIAN\MOBTRACKER\INC" -I "\SYMBIAN\MOBTRACKER\DATA" -I- -I "\SYMBIAN\MOBTRACKER\GROUP" -I "\Symbian\8.0a\S60_2nd_FP2\EPOC32\INCLUDE" -DLANGUAGE_SC -u "\SYMBIAN\MOBTRACKER\SRC\..\DATA\Nac_caption.rss" -o"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC_CAPTION.rSC" -h"\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC_CAPTION.rs~" -t"$(EPOCBLDUDEB)"
	echo this is a dummy output file > "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UDEB\Z\SYSTEM\APPS\NAC\NAC_CAPTION.rSC.dummy"
	perl -S ecopyfile.pl "\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC_CAPTION.rs~" "\Symbian\8.0a\S60_2nd_FP2\EPOC32\INCLUDE\NAC_CAPTION.RSG"
	del "\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC_CAPTION.rs~"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC_CAPTION.r" : "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC_CAPTION.rSC.dummy"

"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC_CAPTION.rSC.dummy" : "\SYMBIAN\MOBTRACKER\SRC\..\DATA\Nac_caption.rss" $(DEPEND)
	perl -S epocrc_ide6.pl -I "\SYMBIAN\MOBTRACKER\SRC\..\DATA" -I "\SYMBIAN\MOBTRACKER\GROUP" -I "\SYMBIAN\MOBTRACKER\INC" -I "\SYMBIAN\MOBTRACKER\DATA" -I- -I "\SYMBIAN\MOBTRACKER\GROUP" -I "\Symbian\8.0a\S60_2nd_FP2\EPOC32\INCLUDE" -DLANGUAGE_SC -u "\SYMBIAN\MOBTRACKER\SRC\..\DATA\Nac_caption.rss" -o"\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC_CAPTION.rSC" -h"\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC_CAPTION.rs~" -t"$(EPOCBLDUREL)"
	echo this is a dummy output file > "\Symbian\8.0a\S60_2nd_FP2\EPOC32\RELEASE\WINS\UREL\Z\SYSTEM\APPS\NAC\NAC_CAPTION.rSC.dummy"
	perl -S ecopyfile.pl "\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC_CAPTION.rs~" "\Symbian\8.0a\S60_2nd_FP2\EPOC32\INCLUDE\NAC_CAPTION.RSG"
	del "\SYMBIAN\MOBTRACKER\SRC\..\DATA\NAC_CAPTION.rs~"


RECREATEWORKSPACE :
	cd \SYMBIAN\MOBTRACKER\GROUP
	perl -S makmake.pl -D \SYMBIAN\MOBTRACKER\GROUP\NAC.MMP VC6

